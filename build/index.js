(()=>{"use strict";var e,t={470:(e,t,o)=>{var r={};o.r(r),o.d(r,{getDoneTodosLength:()=>g,getPendingTodosLength:()=>v,getTodos:()=>O,getTodosLength:()=>E});var n={};o.r(n),o.d(n,{addTodo:()=>b,deleteTodo:()=>D,populateTodos:()=>y,toggleTodo:()=>k,updateTodo:()=>S});var l={};o.r(l),o.d(l,{getTodos:()=>N});const i=window.wp.blocks,d=window.wp.data,a="wp-todo-list/todos",c=[{userId:1,id:1,title:"Buy Milk",completed:!1},{userId:1,id:2,title:"Gardening",completed:!1},{userId:1,id:3,title:"Complete Project Nova",completed:!1}],s="POPULATE_TODOS",u="ADD_TODO",m="UPDATE_TODO",p="DELETE_TODO",_="TOGGLE_TODO",T={items:[]},O=(e,t)=>e.items,E=e=>e.items.length,g=e=>e.items.filter((e=>e.completed)).length,v=e=>e.items.filter((e=>!e.completed)).length,h=e=>{const t=localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return console.log("error",e.message),null}},w=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},f={FETCH_TODOS(){let e=h(a);return e||(w(a,c),e=c),e},DELETE_TODO_FROM_STORAGE(e){const t=h(a).filter((t=>t.id!==e.id));return w(a,t),t},TOGGLE_TODO_IN_STORAGE(e){const t=h(a),o=null==t?void 0:t.map((t=>t.id===e.id?{...t,completed:!t.completed}:t));return w(a,o),o},CREATE_TODO_IN_STORAGE(e){const t=h(a),o=null==t?void 0:t.reduce(((e,t)=>Math.max(e,t.id)),0),r={title:e.title,id:o+1,completed:!1},n=[...t,r];return w(a,n),r},UPDATE_TODO_IN_STORAGE(e){let t;const o=h(a).map((o=>o.id===e.id?(t={...o,title:e.title},{...o,title:e.title}):o));return w(a,o),t}};function y(e){return{type:s,todos:e}}function*b(e){try{const t=yield(e=>({type:"CREATE_TODO_IN_STORAGE",title:e}))(e);return{type:u,todo:t}}catch(e){return(0,d.dispatch)("core/notices").createErrorNotice(e.message||"Could not create todo.")}}function*S(e,t){const o=yield((e,t)=>({type:"UPDATE_TODO_IN_STORAGE",id:e,title:t}))(e,t);return{type:m,item:o}}function*D(e){return yield(e=>({type:"DELETE_TODO_FROM_STORAGE",id:e}))(e),{type:p,id:e}}function*k(e){return yield(e=>({type:"TOGGLE_TODO_IN_STORAGE",id:e}))(e),{type:_,id:e}}function*N(e){try{return y(yield{type:"FETCH_TODOS"})}catch{return(0,d.dispatch)("core/notices").createErrorNotice("Could not fetch todos.")}}const A=(0,d.createReduxStore)(a,{reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return{...e,items:t.todos};case u:return{...e,items:[...e.items,t.todo]};case p:return{...e,items:e.items.filter((e=>e.id!==t.id))};case _:return{...e,items:e.items.map((e=>e.id===t.id?{...e,completed:!e.completed}:e))};case m:return{...e,items:[...e.items.map((e=>e.id===t.item.id?t.item:e))]};default:return e}},selectors:r,actions:n,resolvers:l,controls:f});(0,d.register)(A);const C=window.wp.element,G=window.wp.i18n,P=window.wp.blockEditor,L=window.wp.components,I=function(e){let{icon:t,size:o=24,...r}=e;return(0,C.cloneElement)(t,{width:o,height:o,...r})},R=window.wp.primitives,x=(0,C.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,C.createElement)(R.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),M=(0,C.createElement)(R.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,C.createElement)(R.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"}));(0,i.registerBlockType)("create-block/wp-data-api-todos-block",{edit:function(){const[e,t]=(0,C.useState)(""),[o,r]=(0,C.useState)(void 0),[n,l,i,c]=(0,d.useSelect)((e=>{const t=e(a);return[t.getTodos(),t.getTodosLength(),t.getDoneTodosLength(),t.getPendingTodosLength()]})),s=(0,d.useDispatch)(a);return(0,C.createElement)("div",(0,P.useBlockProps)(),(0,C.createElement)("h4",null,(0,G.__)("Todo List","wp-data-api-todos-block")),(0,C.createElement)("ul",{className:"todos"},n.map((e=>(0,C.createElement)("li",{key:e.id,className:"todo"},(0,C.createElement)(L.CheckboxControl,{className:"todo__title"+(e.completed?" todo__title--done":""),label:e.title,checked:e.completed,onChange:()=>{null==s||s.toggleTodo(e.id)}}),(0,C.createElement)(L.Button,{className:"todo__remove",onClick:()=>{return o=e.id,r(o),void t(n.find((e=>e.id===o)).title);var o}},(0,C.createElement)(I,{icon:x})),(0,C.createElement)(L.Button,{className:"todo__remove",onClick:()=>null==s?void 0:s.deleteTodo(e.id)},(0,C.createElement)(I,{icon:M})))))),(0,C.createElement)("form",{className:"todo__form",onSubmit:n=>{n.preventDefault(),o?(null==s||s.updateTodo(o,e),r(void 0)):null==s||s.addTodo(e),t("")}},(0,C.createElement)(L.TextControl,{value:e,onChange:e=>{t(e)}}),(0,C.createElement)(L.Button,{type:"submit",isPrimary:!0},o?(0,G.__)("Update Item","wp-data-api-todos-block"):(0,G.__)("Add Item","wp-data-api-todos-block"))),(0,C.createElement)("div",null,(0,C.createElement)("h5",null,"Stats"),(0,C.createElement)("ul",{className:"todo__stats"},(0,C.createElement)("li",null,(0,G.__)("All","wp-data-api-todos-block")+": "+l),(0,C.createElement)("li",null,(0,G.__)("Completed")+": "+i),(0,C.createElement)("li",null,(0,G.__)("Pending")+": "+c))))},save:function(){return null}})}},o={};function r(e){var n=o[e];if(void 0!==n)return n.exports;var l=o[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,o,n,l)=>{if(!o){var i=1/0;for(s=0;s<e.length;s++){for(var[o,n,l]=e[s],d=!0,a=0;a<o.length;a++)(!1&l||i>=l)&&Object.keys(r.O).every((e=>r.O[e](o[a])))?o.splice(a--,1):(d=!1,l<i&&(i=l));if(d){e.splice(s--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[o,n,l]},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={826:0,431:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,l,[i,d,a]=o,c=0;if(i.some((t=>0!==e[t]))){for(n in d)r.o(d,n)&&(r.m[n]=d[n]);if(a)var s=a(r)}for(t&&t(o);c<i.length;c++)l=i[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(s)},o=globalThis.webpackChunkwp_data_api_todos_block=globalThis.webpackChunkwp_data_api_todos_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=r.O(void 0,[431],(()=>r(470)));n=r.O(n)})();